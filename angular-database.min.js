!function(o,e,n){"use strict";e.module("ngDatabase",[]).service("$database",["$window",function(o){var e=this,t=n,r=n,c=n,u=n,s=n;e.open=function(e,n,c,u){var s=(t=o.indexedDB).open(e,n);s.onupgradeneeded=function(o){r=o.target.result,c()},s.onsuccess=function(o){r=o.target.result,u()},s.onerror=function(o){console.log("open =>",o.target.error)}},e.exists=function(o){return r.objectStoreNames.contains(o)},e.create=function(o){u=r.createObjectStore(o,{keyPath:"id",autoIncrement:!0})},e.store=function(o,t){return r!==n&&(c=r.transaction([o],t===n?"readonly":"readwrite"),u=c.objectStore(o)),e},e.append=function(o,e){u!==n&&((s=u.add(o)).onsuccess=function(o){"function"==typeof e&&e(o.target.result)},s.onerror=function(o){console.log("append =>",o.target.error)})},e.delete=function(o){(s=u.delete(o)).onsuccess=function(o){},s.onerror=function(o){console.log("delete =>",o.target.error)}},e.clear=function(o,e){(s=u.clear()).onsuccess=function(o){},s.onerror=function(o){console.log("clear =>",o.target.error)}},e.all=function(o){if(u!==n){var e=[],t=u.openCursor();t.onsuccess=function(n){var t=n.target.result;t?(e.push(t.value),t.continue()):o(e)},t.onerror=function(o){$("Toolbar").busy(!1),console.log("all =>",o.target.error)}}},e.update=function(o,e){(s=u.get(o)).onsuccess=function(o){var n=u.put(e);n.onsuccess=function(o){},n.onerror=function(o){console.log("update =>",o.target.error)}},s.onerror=function(o){console.log("get for update =>",o.target.error)}},e.get=function(o,e){u!==n&&((s=u.get(o)).onsuccess=function(o){e(s.result)},s.onerror=function(o){console.log("get =>",o.target.error)})}}])}(window,window.angular,void 0);
